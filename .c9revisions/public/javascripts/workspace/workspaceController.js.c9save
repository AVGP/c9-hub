{"ts":1395697980790,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var WorkspaceCtrl = function($scope, $http, $timeout) {\n  $scope.workspaces = [];\n  $scope.currentWorkspace = {name: null, url: '/welcome.html'};\n\n  $http.get('/workspace')\n  .success(function(data) { console.log(data); $scope.workspaces = data.workspaces; })\n  .error(function(err) { alert(err.msg) });\n\n  var _sendKeepAlive = function() {\n    $http.post('/workspace/' + $scope.currentWorkspace.name + '/keepalive').success(function() {\n      $timeout(_sendKeepAlive, 300000);\n    });\n  };\n\n  $scope.createWorkspace = function() {\n    var wsName = window.prompt(\"Enter workspace name\", \"\");\n    $http.post('/workspace/', {name: wsName})\n    .success(function(data) {\n      alert(data.msg);\n      $scope.workspaces.push({name: wsName});\n    })\n    .error(function(err) {\n      alert(\"Error: \" + err.msg);\n    });\n  }\n\n  $scope.deleteWorkspace = function(name) {\n    if(!window.confirm(\"Do you really want to delete this workspace? All your files in that workspace will be gone forever!\")) return;\n    $http.delete('/workspace/' + name)\n    .success(function(data){\n      console.log(data);\n      alert(data.msg);\n      for(var i=0;i<$scope.workspaces.length;i++) {\n        if($scope.workspaces[i].name === name) {\n          $scope.workspaces.splice(i,1);\n          break;\n        }\n      }\n    })\n    .error(function(err) {\n      console.log(\"ERR:\", err);\n    });\n  }\n\n  $scope.runWorkspace = function(name) {\n    console.log(name);\n    $http.get('/workspace/' + name).success(function(data) {\n      console.log(data);\n      $timeout(function() {\n        $scope.currentWorkspace.url = data.url;\n        _sendKeepAlive();\n      }, 2000);\n\n    }).error(function(err) {\n      alert(\"Error: \" + err);\n      console.log(err);\n    });\n    $scope.currentWorkspace.name = name;\n  }\n}"]],"start1":0,"start2":0,"length1":0,"length2":1775}]],"length":1775}
